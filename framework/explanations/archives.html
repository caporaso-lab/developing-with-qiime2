

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Anatomy of an Archive &#8212; Developing with QIIME 2</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'framework/explanations/archives';</script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Semantic Types, Primitives, and Visualizations" href="types.html" />
    <link rel="prev" title="How Data is Stored" href="data-storage.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/dwq2-light.png" class="logo__image only-light" alt="Developing with QIIME 2 - Home"/>
    <script>document.write(`<img src="../../_static/dwq2-dark.png" class="logo__image only-dark" alt="Developing with QIIME 2 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Plugins 🔌</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../plugins/intro.html">Plugin Development</a><input checked class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../plugins/tutorials/intro.html">Tutorial: A step-by-step guide to building your first QIIME 2 plugin</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/tutorials/create-from-template.html">Create your plugin from a template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/tutorials/add-nw-align-method.html">Add a first (real) Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/tutorials/add-alignment-visualizer.html">Add a first Visualizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/tutorials/add-artifact-class.html">Add a new Artifact Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/tutorials/add-usage-examples.html">Add a Usage Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/tutorials/add-2nd-transformer.html">Add a second transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/tutorials/add-pipeline.html">Add a first Pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/tutorials/conclusion.html">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../plugins/how-to-guides/intro.html">How-To Guides</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/set-up-development-environment.html">Set up your development environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/register-a-plugin.html">Register a QIIME 2 plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/create-register-method.html">Create and register a Method</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/create-register-visualizer.html">Create and register a visualizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/create-register-pipeline.html">Create and register a pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/create-register-transformer.html">Creating and registering a Transformer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/artifact-collections-as-io.html">Use Artifact Collections as Action inputs or outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/play-nicely-with-others.html">How to play nicely with other plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/use-metadata.html">How to use Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/test-plugins.html">How to test QIIME 2 plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/usage-examples.html">Writing Usage Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/how-to-guides/format-validation-levels.html">Defining different Format validation levels</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../plugins/explanations/intro.html">Explanations</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/explanations/actions.html">Types of QIIME 2 Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/explanations/types-of-types.html">Semantic types, data types, file formats, and artifact classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/explanations/transformers.html">Transformers</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../plugins/references/intro.html">References</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/references/antipatterns.html">Plugin development anti-patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/references/api.html">Plugin developer API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins/references/metadata-api.html"><code class="docutils literal notranslate"><span class="pre">qiime2.Metadata</span></code> API</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Interfaces 🧩</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../interfaces/intro.html">Interface Development</a><input checked class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../interfaces/references/intro.html">References</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/references/api.html">Interface developer API reference</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">The Framework 🌳</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../intro.html">Framework Development</a><input checked class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../how-to-guides/intro.html">How-To Guides</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../how-to-guides/parallel-configuration.html">Parallel configuration and usage in QIIME 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../how-to-guides/pipeline-resumption.html">Pipeline Resumption in QIIME 2</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="intro.html">Explanations</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="architecture.html">QIIME 2 architecture overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="data-storage.html">How Data is Stored</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Anatomy of an Archive</a></li>
<li class="toctree-l3"><a class="reference internal" href="types.html">Semantic Types, Primitives, and Visualizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="formats.html">File Formats and Directory Formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="provenance.html">Decentralized retrospective provenance tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="garbage-collection.html">Garbage Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="metaprogramming.html">Metaprogramming</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../references/intro.html">References</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../references/archive-versions.html">Archive versions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation 📚</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../docs/intro.html">Docs Development</a><input checked class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../docs/user-documentation.html">User documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/developer-documentation.html">Developer documentation</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Continuous Integration 🛠️</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../ci/intro.html">Distribution Development</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Back Matter 🗂️</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../back-matter/intro.html">Back matter</a><input checked class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../back-matter/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../back-matter/bibliography.html">List of works cited</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../back-matter/genindex.html">Index</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/framework/explanations/archives.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Anatomy of an Archive</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-most-important-file-metadata-yaml">The Most Important File: <code class="docutils literal notranslate"><span class="pre">metadata.yaml</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-goes-in-data">Data Goes In <code class="docutils literal notranslate"><span class="pre">/data/</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#provenance-goes-in-provenance">Provenance Goes In <code class="docutils literal notranslate"><span class="pre">/provenance/</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-a-zip-file">Why a ZIP File?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rules-for-identifying-an-archive">Rules for identifying an archive</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="anatomy-of-an-archive">
<span id="archive-anatomy"></span><h1>Anatomy of an Archive<a class="headerlink" href="#anatomy-of-an-archive" title="Permalink to this heading">#</a></h1>
<p>QIIME 2 stores data in a directory structure called an <a class="reference internal" href="../../back-matter/glossary.html#term-Archive"><span class="xref std std-term">Archive</span></a>.
These archives are zipped to make moving data simple and convenient.</p>
<p>The directory structure has a single root directory named with a <a class="reference internal" href="../../back-matter/glossary.html#term-UUID"><span class="xref std std-term">UUID</span></a> which serves as the <a class="reference internal" href="../../back-matter/glossary.html#term-Identity"><span class="xref std std-term">identity</span></a> of the archive.
Additional files and directories present in the archive are described below.</p>
<section id="the-most-important-file-metadata-yaml">
<span id="metadata-yaml"></span><h2>The Most Important File: <code class="docutils literal notranslate"><span class="pre">metadata.yaml</span></code><a class="headerlink" href="#the-most-important-file-metadata-yaml" title="Permalink to this heading">#</a></h2>
<p>In the root of an <a class="reference internal" href="../../back-matter/glossary.html#term-Archive"><span class="xref std std-term">archive</span></a> directory, there is a file named <code class="docutils literal notranslate"><span class="pre">metadata.yaml</span></code>.
This file describes the <a class="reference internal" href="../../back-matter/glossary.html#term-Type"><span class="xref std std-term">type</span></a>, the <a class="reference internal" href="../../back-matter/glossary.html#term-Directory-Format"><span class="xref std std-term">directory format</span></a>, and repeats the <a class="reference internal" href="../../back-matter/glossary.html#term-Identity"><span class="xref std std-term">identity</span></a> of a piece of data.</p>
<p>An example of this file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">45c12936-4b60-484d-bbe1-98ff96bad145</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FeatureTable[Frequency]</span>
<span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BIOMV210DirFmt</span>
</pre></div>
</div>
<p>It is possible for <code class="docutils literal notranslate"><span class="pre">format</span></code> to be set as <code class="docutils literal notranslate"><span class="pre">null</span></code> only when <code class="docutils literal notranslate"><span class="pre">type</span></code> is set as <code class="docutils literal notranslate"><span class="pre">Visualization</span></code> (representing a <a class="reference internal" href="../../back-matter/glossary.html#term-Visualization-Type"><span class="xref std std-term">Visualization (Type)</span></a>).
This implies that the <code class="docutils literal notranslate"><span class="pre">/data/</span></code> directory (described below) does not have a schema.</p>
</section>
<section id="data-goes-in-data">
<span id="id1"></span><h2>Data Goes In <code class="docutils literal notranslate"><span class="pre">/data/</span></code><a class="headerlink" href="#data-goes-in-data" title="Permalink to this heading">#</a></h2>
<p>Where data is stored, the <a class="reference internal" href="../../back-matter/glossary.html#term-Payload"><span class="xref std std-term">payload</span></a> of an archive, is in an aptly named <code class="docutils literal notranslate"><span class="pre">/data/</span></code> subdirectory.
The structure of this subdirectory depends on the payload.</p>
<p>If the archive is a <a class="reference internal" href="../../back-matter/glossary.html#term-Visualization"><span class="xref std std-term">visualization</span></a>, then the payload is a (possibly interactive) visualization, which is implemented as a small static website (with an <code class="docutils literal notranslate"><span class="pre">index.html</span></code> file and any other assets).</p>
<p>If the archive is an <a class="reference internal" href="../../back-matter/glossary.html#term-Artifact"><span class="xref std std-term">artifact</span></a>, then the payload is determined by the <a class="reference internal" href="../../back-matter/glossary.html#term-Directory-Format"><span class="xref std std-term">directory format</span></a>.</p>
</section>
<section id="provenance-goes-in-provenance">
<span id="id2"></span><h2>Provenance Goes In <code class="docutils literal notranslate"><span class="pre">/provenance/</span></code><a class="headerlink" href="#provenance-goes-in-provenance" title="Permalink to this heading">#</a></h2>
<p>In addition to storing data, QIIME 2 stores <em>metadata</em> including what actions were performed to generate the current <code class="docutils literal notranslate"><span class="pre">Result</span></code>, what versions of QIIME 2 and other dependencies were used, and what references to cite if the data is used in a publication (for example)</p>
<p>As it relates to the archive structure, the <code class="docutils literal notranslate"><span class="pre">/provenance/</span></code> directory is designed to be self-contained and self-referential.
This means that it duplicates some of the information available in the root of the <a class="reference internal" href="../../back-matter/glossary.html#term-Archive"><span class="xref std std-term">archive</span></a>, but this simplifies the code responsible for tracking and reading provenance.</p>
<p><a class="reference internal" href="#archive-structure"><span class="std std-numref">Fig. 4</span></a> illustrates this idea.</p>
<figure class="align-default" id="archive-structure">
<img alt="../../_images/archive-structure.svg" src="../../_images/archive-structure.svg" /><figcaption>
<p><span class="caption-number">Fig. 4 </span><span class="caption-text">Description of the QIIME 2 archive structure.</span><a class="headerlink" href="#archive-structure" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Looking closely we see the previously described <code class="docutils literal notranslate"><span class="pre">/data/</span></code> directory and <code class="docutils literal notranslate"><span class="pre">metadata.yaml</span></code> file, in addition to a <code class="docutils literal notranslate"><span class="pre">VERSION</span></code> file (described below), and the <code class="docutils literal notranslate"><span class="pre">/provenance/</span></code> directory in question.</p>
<p>Following the provenance directory, we see that the provenance structure is repeated within the <code class="docutils literal notranslate"><span class="pre">/provenance/artifacts/</span></code> directory.
This directory contains the <em>ancestral provenance</em> of all <a class="reference internal" href="../../back-matter/glossary.html#term-Artifact"><span class="xref std std-term">artifacts</span></a> used up to this point.
Because the structure repeats itself, it is possible to create a new provenance directory by simply adding all input artifacts’ <code class="docutils literal notranslate"><span class="pre">/provenance/</span></code> directories into a new <code class="docutils literal notranslate"><span class="pre">/provenance/artifacts/</span></code> directory.
Then the <code class="docutils literal notranslate"><span class="pre">/provenance/artifacts/</span></code> directories of the original inputs can be also merged together.
Because the directories are named by a <a class="reference internal" href="../../back-matter/glossary.html#term-UUID"><span class="xref std std-term">UUID</span></a>, we know the <a class="reference internal" href="../../back-matter/glossary.html#term-Identity"><span class="xref std std-term">identity</span></a> of each ancestor, and if seen twice, can simply be ignored.
This simplifies the problem of capturing <em>ancestral provenance</em> to one of merging uniquely named file-trees.</p>
</section>
<section id="why-a-zip-file">
<span id="why-zip"></span><h2>Why a ZIP File?<a class="headerlink" href="#why-a-zip-file" title="Permalink to this heading">#</a></h2>
<p>ZIP files are a ubiquitous and well understood format.
There is a huge variety of software available to read and manipulate ZIP files.</p>
<p>The ZIP format additonally enables random access of files within the archive, making it possible to read data without extracting the entire contents of the ZIP file (in contrast to a linear archive like TAR).
This is very convenient if you need to, for example, pull a single file out of a large ZIP archive containing many files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">qiime2.core.archive.archiver:_ZipArchive</span></code> is the structure responsible for managing the contents of a ZIP file (using <code class="docutils literal notranslate"><span class="pre">zipfile:ZipFile</span></code>).</p>
</div>
</section>
<section id="rules-for-identifying-an-archive">
<span id="identifying-an-archive"></span><h2>Rules for identifying an archive<a class="headerlink" href="#rules-for-identifying-an-archive" title="Permalink to this heading">#</a></h2>
<p>Every QIIME 2 <a class="reference internal" href="../../back-matter/glossary.html#term-Archive"><span class="xref std std-term">archive</span></a> has the following structure:</p>
<p>A root directory which is named a standard representation of a UUID (version 4), and a file within that directory named <code class="docutils literal notranslate"><span class="pre">VERSION</span></code>.</p>
<p>The <a class="reference internal" href="../../back-matter/glossary.html#term-UUID"><span class="xref std std-term">UUID</span></a> is the <a class="reference internal" href="../../back-matter/glossary.html#term-Identity"><span class="xref std std-term">identity</span></a> of the archive, while the <code class="docutils literal notranslate"><span class="pre">VERSION</span></code> file provides enough detail to determine how to parse the rest of the archive’s structure.</p>
<p id="archive-version-file">Within <code class="docutils literal notranslate"><span class="pre">VERSION</span></code> the following text will be present:</p>
<aside class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">VERSION</span></code> file is intentionally not in YAML, INI, or any other common data serialization or configuration format.
This is to discourage the situation where important archive files are reformatted from YAML to another format and VERSION is updated (e.g., for consistency), breaking backwards compatibility.</p>
</div>
</aside>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QIIME</span> <span class="mi">2</span>
<span class="n">archive</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">integer</span> <span class="n">version</span><span class="o">&gt;</span>
<span class="n">framework</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">version</span> <span class="n">string</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;integer</span> <span class="pre">version&gt;</span></code> is the version that the archive was saved with.
This is used to identify the <em>schema</em> of the archive structure, which evolves over time to support new functionality, allowing software to dispatch appropriate parsing logic.</p>
<p>As a historical example, <a class="reference internal" href="../references/archive-versions.html#archive-version-0"><span class="std std-ref">archive version <code class="docutils literal notranslate"><span class="pre">0</span></code></span></a> had no <code class="docutils literal notranslate"><span class="pre">/provenance/</span></code> directory, as QIIME 2’s provenance tracking hadn’t yet been implemented.
The archive version <code class="docutils literal notranslate"><span class="pre">0</span></code> parser therefore doens’t look for the <code class="docutils literal notranslate"><span class="pre">/provenance/</span></code> directory.
This particular case would be easy enough to check for at runtime, but this versioning scheme allows for more complex differences between archive versions while ensuring that QIIME 2 will always be able to interpret older archives.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These rules are encoded in <code class="docutils literal notranslate"><span class="pre">qiime2.core.archive.archiver:_Archive</span></code>.</p>
</div>
<p>The different versions of QIIME 2 Archive Formats are detailed in <a class="reference internal" href="../references/archive-versions.html#archive-versions"><span class="std std-ref">Archive versions</span></a>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./framework/explanations"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="data-storage.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">How Data is Stored</p>
      </div>
    </a>
    <a class="right-next"
       href="types.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Semantic Types, Primitives, and Visualizations</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-most-important-file-metadata-yaml">The Most Important File: <code class="docutils literal notranslate"><span class="pre">metadata.yaml</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-goes-in-data">Data Goes In <code class="docutils literal notranslate"><span class="pre">/data/</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#provenance-goes-in-provenance">Provenance Goes In <code class="docutils literal notranslate"><span class="pre">/provenance/</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-a-zip-file">Why a ZIP File?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rules-for-identifying-an-archive">Rules for identifying an archive</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Greg Caporaso and Evan Bolyen
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>