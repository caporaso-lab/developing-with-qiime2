

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Cache &#8212; Developing with QIIME 2</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '40-reference/10-api/20-cache/10-cache';</script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Pool" href="20-pool.html" />
    <link rel="prev" title="Artifact Cache" href="00-index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../../00-intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/q2dev.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../../_static/q2dev.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../00-intro.html">
                    Developing with QIIME 2
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../10-tutorial/00-intro.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../10-tutorial/10-plugins/00-intro.html">Building your first QIIME 2 plugin</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../10-tutorial/10-plugins/10-plugin-setup.html">Instantiating the <cite>qiime2.plugin.Plugin</cite> object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../10-tutorial/10-plugins/20-registering-actions.html">Registering an Action</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../10-tutorial/20-interfaces/00-intro.html">Building your first QIIME 2 interface</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../10-tutorial/20-interfaces/10-plugin-manager.html">Instantiating <code class="docutils literal notranslate"><span class="pre">qiime2.sdk.PluginManager</span></code></a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Understanding QIIME 2</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../20-understanding/00-intro.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../20-understanding/10-plugins/00-intro.html">Understanding QIIME 2 Plugins</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../20-understanding/10-plugins/10-plugin.html">The <code class="docutils literal notranslate"><span class="pre">qiime2.plugin.Plugin</span></code> object</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../20-understanding/20-interfaces/00-intro.html">Understanding QIIME 2 Interfaces</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../20-understanding/20-interfaces/10-plugin-manager.html">The <code class="docutils literal notranslate"><span class="pre">qiime2.sdk.PluginManager</span></code> object</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">How-to guides</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../30-how-to/00-intro.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../30-how-to/10-plugins/00-intro.html">Accomplishing specific tasks in QIIME 2 Plugins</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../30-how-to/10-plugins/10-type-mapping.html">Mapping input semantic types to output semantic types</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../30-how-to/20-interfaces/00-intro.html">Accomplishing specific tasks in QIIME 2 Interfaces</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../30-how-to/20-interfaces/10-accessing-help-text.html">Accessing help text on plugins, actions, types, and formats</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../00-intro.html">Introduction</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../00-intro.html">QIIME 2 API reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../10-usage/00-index.html">Usage API</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../10-usage/10-authors.html">Usage API (for example authors)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10-usage/20-drivers.html">Usage API (for interface drivers)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../10-usage/30-implementations.html">Premade Usage Drivers</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="00-index.html">Artifact Cache</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="20-pool.html">Pool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../90-glossary.html">Glossary</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Back matter</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../99-bibliography.html">List of works cited</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/caporaso-lab/developing-with-qiime2" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/caporaso-lab/developing-with-qiime2/issues/new?title=Issue%20on%20page%20%2F40-reference/10-api/20-cache/10-cache.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/40-reference/10-api/20-cache/10-cache.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Cache</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-cache-class">The Cache Class</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="cache">
<h1>Cache<a class="headerlink" href="#cache" title="Permalink to this heading">#</a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.get_cache">
<span class="sig-prename descclassname"><span class="pre">cache.</span></span><span class="sig-name descname"><span class="pre">get_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.get_cache" title="Permalink to this definition">#</a></dt>
<dd><p>Gets the cache we have instructed QIIME 2 to use in this invocation.
By default this is a cache located at $TMPDIR/qiime2/$USER, but if the
user has set a cache it is the cache they set. This is used by various
parts of the framework to determine what cache they should be saving
to/loading from.</p>
<dl class="simple">
<dt>Cache</dt><dd><p>The cache QIIME 2 is using for the current invocation.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;qiime2-test-temp-&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;cache&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># get_cache() will return the temp cache, not the one we just made.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_cache</span><span class="p">()</span> <span class="o">==</span> <span class="n">cache</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># After withing in the cache we just made, get_cache() will return it.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">cache</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">get_cache</span><span class="p">()</span> <span class="o">==</span> <span class="n">cache</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Now that we have exited our cache, we will get the temp cache again.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_cache</span><span class="p">()</span> <span class="o">==</span> <span class="n">cache</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<section id="the-cache-class">
<h2>The Cache Class<a class="headerlink" href="#the-cache-class" title="Permalink to this heading">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">qiime2.core.cache.</span></span><span class="sig-name descname"><span class="pre">Cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache" title="Permalink to this definition">#</a></dt>
<dd><p>General structure of the cache:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>artifact_cache/
├── data/
│   ├── uuid1/
│   ├── uuid2/
│   ├── uuid3/
│   └── uuid4/
├── keys/
│   ├── bar.yaml
│   ├── baz.yaml
│   └── foo.yaml
├── pools/
│   └── puuid1/
│       ├── uuid1 -&gt; ../../data/uuid1/
│       └── uuid2 -&gt; ../../data/uuid2/
├── processes/
│   └── &lt;process-id&gt;-&lt;process-create-time&gt;@&lt;user&gt;/
│       ├── uuid3 -&gt; ../../data/uuid3/
│       └── uuid4 -&gt; ../../data/uuid4/
└── VERSION
</pre></div>
</div>
<p><strong>Data:</strong> The data directory contains all of the artifacts in the cache in
unzipped form.</p>
<p><strong>Keys:</strong> The keys directory contains yaml files that refer to either a
piece of data or a pool. The data/pool referenced by the key will be kept
as long as the key exists.</p>
<p><strong>Pools:</strong> The pools directory contains all named (keyed) pools in the
cache. Each pool contains symlinks to all of the data it contains.</p>
<p><strong>Processes:</strong> The processes directory contains process pools of the format
&lt;process-id&gt;-&lt;process-create-time&gt;&#64;&lt;user&gt; for each process that has used
this cache. Each pool contains symlinks to each element in the data
directory the process that created the pool has used in some way (created,
loaded, etc.). These symlinks are ephemeral and have lifetimes &lt;= the
lifetime of the process that created them. More permanent storage is done
using keys.</p>
<p><strong>VERSION:</strong> This file contains some information QIIME 2 uses to determine
what version of QIIME 2 was used to create the cache and what version of
cache it is (if we make breaking changes in the future this version number
will allow for backwards compatibility).</p>
<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">process_pool_lifespan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">45</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Creates a Cache object backed by the directory specified by path. If
no path is provided, it gets a path to a temp cache.</p>
<p>If no path is provided and the path $TMPDIR/qiime2/$USER exists but is
not a valid cache, we remove the directory and create a cache there.</p>
<dl class="simple">
<dt>path<span class="classifier">str or PathLike object</span></dt><dd><p>Should point either to a non-existent writable directory to be
created as a cache or to an existing writable cache. Defaults to
None which creates the cache at $TMPDIR/qiime2/$USER.</p>
</dd>
<dt>process_pool_lifespan<span class="classifier">int</span></dt><dd><p>The number of days we should allow process pools to exist for
before culling them.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.__enter__">
<span class="sig-name descname"><span class="pre">__enter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.__enter__" title="Permalink to this definition">#</a></dt>
<dd><p>Tell QIIME 2 to use this cache in its current invocation (see
get_cache).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.__exit__">
<span class="sig-name descname"><span class="pre">__exit__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.__exit__" title="Permalink to this definition">#</a></dt>
<dd><p>Tell QIIME 2 to go back to using the default cache.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.is_cache">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.is_cache" title="Permalink to this definition">#</a></dt>
<dd><p>Tells us if the path we were given is a cache.</p>
<dl class="simple">
<dt>path<span class="classifier">str or PathLike object</span></dt><dd><p>The path to the cache we are checking.</p>
</dd>
</dl>
<dl class="simple">
<dt>bool</dt><dd><p>Whether the path we were given is a cache or not.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;qiime2-test-temp-&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;cache&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Cache</span><span class="o">.</span><span class="n">is_cache</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.create_pool">
<span class="sig-name descname"><span class="pre">create_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reuse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.create_pool" title="Permalink to this definition">#</a></dt>
<dd><p>Used to create named pools.</p>
<p>Named pools can be used by pipelines to store all intermediate results
created by the pipeline and prevent it from being reaped. This allows
us to resume failed pipelines by collecting all of the data the
pipeline saved to the named pool before it crashed and reusing it so we
don’t need to run the steps that created it again and can instead rerun
the pipeline from where it failed.</p>
<p>Once the pipeline completes, all of its final results will be saved to
the pool as well with the idea being that the user can then reuse the
pool keys to refer to the final data and get rid of the pool now that
the pipeline that created it has completed.</p>
<dl class="simple">
<dt>key<span class="classifier">str</span></dt><dd><p>The key to use to reference the pool.</p>
</dd>
<dt>reuse<span class="classifier">bool</span></dt><dd><p>Whether to reuse a pool if a pool with the given keys already
exists.</p>
</dd>
</dl>
<dl class="simple">
<dt>Pool</dt><dd><p>The pool we created.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;qiime2-test-temp-&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;cache&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pool</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">create_pool</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get_keys</span><span class="p">()</span> <span class="o">==</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;key&#39;</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get_pools</span><span class="p">()</span> <span class="o">==</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;key&#39;</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.garbage_collection">
<span class="sig-name descname"><span class="pre">garbage_collection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.garbage_collection" title="Permalink to this definition">#</a></dt>
<dd><p>Runs garbage collection on the cache in the following steps:</p>
<p><strong>1.</strong> Iterate over all keys and log all data and pools referenced by
the keys.</p>
<p><strong>2.</strong> Iterate over all named pools and delete any that were not
referred to by a key while logging all data in pools that were referred
to by keys.</p>
<p><strong>3.</strong> Iterate over all process pools and log all data they refer to.</p>
<p><strong>4.</strong> Iterate over all data and remove any that was not referenced.</p>
<p>This process destroys data and named pools that do not have keys along
with process pools older than the process_pool_lifespan on the cache
which defaults to 45 days. It never removes keys.</p>
<p>We lock out other processes and threads from accessing the cache while
garbage collecting to ensure the cache remains in a consistent state.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.save" title="Permalink to this definition">#</a></dt>
<dd><p>Saves data into the cache by creating a key referring to the data
then copying the data if it is not already in the cache.</p>
<dl class="simple">
<dt>ref<span class="classifier">Result</span></dt><dd><p>The QIIME 2 result we are saving into the cache.</p>
</dd>
<dt>key<span class="classifier">str</span></dt><dd><p>The key we are saving the result under.</p>
</dd>
</dl>
<dl class="simple">
<dt>Result</dt><dd><p>A Result backed by the data in the cache.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qiime2.sdk.result</span> <span class="kn">import</span> <span class="n">Artifact</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qiime2.core.testing.type</span> <span class="kn">import</span> <span class="n">IntSequence1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;qiime2-test-temp-&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;cache&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">artifact</span> <span class="o">=</span> <span class="n">Artifact</span><span class="o">.</span><span class="n">import_data</span><span class="p">(</span><span class="n">IntSequence1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">saved_artifact</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">artifact</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># save returned an artifact that is backed by the data in the cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">saved_artifact</span><span class="o">.</span><span class="n">_archiver</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="o">==</span>                 <span class="nb">str</span><span class="p">(</span><span class="n">cache</span><span class="o">.</span><span class="n">data</span> <span class="o">/</span> <span class="nb">str</span><span class="p">(</span><span class="n">artifact</span><span class="o">.</span><span class="n">uuid</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get_keys</span><span class="p">()</span> <span class="o">==</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;key&#39;</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.load" title="Permalink to this definition">#</a></dt>
<dd><p>Loads the data pointed to by a key. Will defer to
Cache.load_collection if the key contains ‘order’. Will error on keys
that refer to pools without order.</p>
<dl class="simple">
<dt>key<span class="classifier">str</span></dt><dd><p>The key to the data we are loading.</p>
</dd>
</dl>
<dl class="simple">
<dt>Result</dt><dd><p>The loaded data pointed to by the key.</p>
</dd>
</dl>
<dl class="simple">
<dt>ValueError</dt><dd><p>If the key does not reference any data meaning you probably tried
to load a pool.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qiime2.sdk.result</span> <span class="kn">import</span> <span class="n">Artifact</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qiime2.core.testing.type</span> <span class="kn">import</span> <span class="n">IntSequence1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;qiime2-test-temp-&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;cache&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">artifact</span> <span class="o">=</span> <span class="n">Artifact</span><span class="o">.</span><span class="n">import_data</span><span class="p">(</span><span class="n">IntSequence1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">saved_artifact</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">artifact</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loaded_artifact</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loaded_artifact</span> <span class="o">==</span> <span class="n">saved_artifact</span> <span class="o">==</span> <span class="n">artifact</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">loaded_artifact</span><span class="o">.</span><span class="n">_archiver</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="o">==</span>                 <span class="nb">str</span><span class="p">(</span><span class="n">cache</span><span class="o">.</span><span class="n">data</span> <span class="o">/</span> <span class="nb">str</span><span class="p">(</span><span class="n">artifact</span><span class="o">.</span><span class="n">uuid</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.remove" title="Permalink to this definition">#</a></dt>
<dd><p>Removes a key from the cache then runs garbage collection to remove
anything the removed key was referencing and any other loose data.</p>
<dl class="simple">
<dt>key<span class="classifier">str</span></dt><dd><p>The key we are removing.</p>
</dd>
</dl>
<dl class="simple">
<dt>KeyError</dt><dd><p>If the key does not exist in the cache.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qiime2.sdk.result</span> <span class="kn">import</span> <span class="n">Artifact</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qiime2.core.testing.type</span> <span class="kn">import</span> <span class="n">IntSequence1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;qiime2-test-temp-&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_dir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;cache&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">artifact</span> <span class="o">=</span> <span class="n">Artifact</span><span class="o">.</span><span class="n">import_data</span><span class="p">(</span><span class="n">IntSequence1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">saved_artifact</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">artifact</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get_keys</span><span class="p">()</span> <span class="o">==</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;key&#39;</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get_keys</span><span class="p">()</span> <span class="o">==</span> <span class="nb">set</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Note that the data is still in the cache due to our</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># saved_artifact causing the process pool to keep a reference to it</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span> <span class="o">==</span> <span class="nb">set</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">saved_artifact</span><span class="o">.</span><span class="n">uuid</span><span class="p">)])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">saved_artifact</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The data is still there even though the reference is gone because</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># the cache has not run its own garbage collection yet. For various</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># reasons, it is not feasible for us to safely garbage collect the</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># cache when a reference in memory is deleted. Note also that</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &quot;artifact&quot; is not backed by the data in the cache, it only lives</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># in memory, but it does have the same uuid as &quot;saved_artifact.&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span> <span class="o">==</span> <span class="nb">set</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">artifact</span><span class="o">.</span><span class="n">uuid</span><span class="p">)])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">garbage_collection</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Now it is gone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span> <span class="o">==</span> <span class="nb">set</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_dir</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.get_data">
<span class="sig-name descname"><span class="pre">get_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.get_data" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a set of all data in the cache.</p>
<dl class="simple">
<dt>set[str]</dt><dd><p>All of the data in the cache in the form of the top level
directories which will be the uuids of the artifacts.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.get_keys">
<span class="sig-name descname"><span class="pre">get_keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.get_keys" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a set of all keys in the cache.</p>
<dl class="simple">
<dt>set[str]</dt><dd><p>All of the keys in the cache. Just the names now what they refer
to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.get_pools">
<span class="sig-name descname"><span class="pre">get_pools</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.get_pools" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a set of all pools in the cache.</p>
<dl class="simple">
<dt>set[str]</dt><dd><p>The names of all of the named pools in the cache.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="qiime2.core.cache.Cache.get_processes">
<span class="sig-name descname"><span class="pre">get_processes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qiime2.core.cache.Cache.get_processes" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a set of all process pools in the cache.</p>
<dl class="simple">
<dt>set[str]</dt><dd><p>The names of all of the process pools in the cache.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./40-reference/10-api/20-cache"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="00-index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Artifact Cache</p>
      </div>
    </a>
    <a class="right-next"
       href="20-pool.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Pool</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-cache-class">The Cache Class</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By QIIME 2 Project
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>